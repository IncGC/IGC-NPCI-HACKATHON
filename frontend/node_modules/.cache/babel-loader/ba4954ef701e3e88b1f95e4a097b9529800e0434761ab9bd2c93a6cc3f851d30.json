{"ast":null,"code":"var _jsxFileName = \"/home/ravi/npciV4/IGC-NPCI-HACKATHON/frontend/src/comp/Custodian/Report.js\",\n  _s = $RefreshSig$();\nimport { useMemo, useState, useEffect } from 'react';\nimport { ReactComponent as Filter } from '../../assets/svg/common/filter.svg';\nimport { DropDownWrapper } from '../UIComp/DropDown';\nimport FilterByDate from './FilterByDate';\nimport live from '../../constants/report';\nimport Loader from '../Common/Loader';\nimport { getPurchaseLog } from '../../apis/custodianApis';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Report() {\n  _s();\n  const [dateFilter, setDateFilter] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [type, setType] = useState(\"\");\n  const [res, setRes] = useState({});\n  const [tradeValueData, setTradeValueData] = useState({});\n\n  // const data = useMemo(() => {\n  //   let cloned = [...live]\n\n  //   if (dateFilter) {\n  //     let start = new Date(dateFilter.start).getTime()\n  //     let end = new Date(dateFilter.end).getTime()\n  //     cloned = cloned.filter(l => {\n  //       let currDate = new Date(l.maturityDate).getTime()\n  //       return currDate >= start && currDate <= end\n  //     })\n  //   }\n\n  //   if (type) {\n  //     cloned = cloned.filter(l => l.transactionType.match(type))\n  //   }\n\n  //   return cloned\n  // }, [type, dateFilter])\n\n  useEffect(() => {\n    const onSuccess = payload => {\n      setRes(payload);\n      for (let i = 0; i < res.length; i++) {\n        const entry = res[i];\n        // for (const [key, value] of Object.entries(res[i])) {\n\n        // }\n        setTradeValueData(p => ({\n          ...p,\n          [entry.Isin]: entry.TradeValue + tradeValueData[entry.Isin]\n        }));\n      }\n      setIsLoading(false);\n    };\n    getPurchaseLog(onSuccess);\n  }, []);\n  const updateType = val => setType(p => p === val ? \"\" : val);\n  if (isLoading) return /*#__PURE__*/_jsxDEV(Loader, {\n    wrapperCls: \"h-[calc(100vh-64px)]\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"dfc h-[calc(100vh-64px)] border-r border-[rgba(255,255,255,.3)] overflow-y-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"df gap-4 p-4 border-b border-[rgba(255,255,255,.3)] relative\",\n      children: [/*#__PURE__*/_jsxDEV(DropDownWrapper, {\n        list: [\"List of Tokenized Bonds\", \"List of Detokenized Bonds\", \"Trade Report\"],\n        onClk: updateType,\n        active: type,\n        activeCls: \"bg-slate-600 text-white\",\n        rootCls: \"p-0\",\n        needArrow: true,\n        children: /*#__PURE__*/_jsxDEV(Filter, {\n          className: `fill-white ${type ? \"opacity-100\" : \"opacity-70\"}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-lg font-medium text-center\",\n        children: \"Report\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scroll-y overflow-x-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"w-full table-fixed\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"sticky top-0 text-sm bg-slate-900 shadow-[0_1px_3px_0_rgba(255,255,255,.1)] z-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"w-36 px-4 py-2\",\n              children: \"ISIN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"w-52 px-4 py-2\",\n              children: \"Issuer Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"w-32 px-4 py-2\",\n              children: \"Coupon Rate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"w-32 px-4 py-2\",\n              children: \"Maturity Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"w-28 px-4 py-2\",\n              children: \"No. of Tokens\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"w-28 px-4 py-2\",\n              children: \"Trade Value\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: res.map(li => /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"hover:bg-[rgba(255,255,255,.1)] cursor-pointer group\",\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-4 py-2 text-sm opacity-80 border-b border-[rgba(255,255,255,.3)] group-hover:opacity-100\",\n              children: [\" \", li.Isin, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-4 py-2 text-sm font-medium opacity-80 border-b border-[rgba(255,255,255,.3)] group-hover:opacity-100\",\n              children: [\" \", li.issuerName, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-4 py-2 text-sm opacity-80 border-b border-[rgba(255,255,255,.3)] group-hover:opacity-100\",\n              children: [\" \", li.couponrate, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-4 py-2 text-sm opacity-80 border-b border-[rgba(255,255,255,.3)] group-hover:opacity-100\",\n              children: [\" \", li.maturitydate, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-4 py-2 text-sm opacity-80 border-b border-[rgba(255,255,255,.3)] group-hover:opacity-100\",\n              children: [\" \", li.volumn / 1000, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-4 py-2 text-sm opacity-80 border-b border-[rgba(255,255,255,.3)] group-hover:opacity-100\",\n              children: [\" \", li.volumn, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 19\n            }, this)]\n          }, li.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(Report, \"L0kSwmddbhMm9JdMEjfVYI4PpLs=\");\n_c = Report;\nexport default Report;\nvar _c;\n$RefreshReg$(_c, \"Report\");","map":{"version":3,"names":["useMemo","useState","useEffect","ReactComponent","Filter","DropDownWrapper","FilterByDate","live","Loader","getPurchaseLog","Report","dateFilter","setDateFilter","isLoading","setIsLoading","type","setType","res","setRes","tradeValueData","setTradeValueData","onSuccess","payload","i","length","entry","p","Isin","TradeValue","updateType","val","map","li","issuerName","couponrate","maturitydate","volumn","id"],"sources":["/home/ravi/npciV4/IGC-NPCI-HACKATHON/frontend/src/comp/Custodian/Report.js"],"sourcesContent":["import { useMemo, useState, useEffect } from 'react';\nimport { ReactComponent as Filter } from '../../assets/svg/common/filter.svg';\nimport { DropDownWrapper } from '../UIComp/DropDown';\nimport FilterByDate from './FilterByDate';\nimport live from '../../constants/report';\nimport Loader from '../Common/Loader';\nimport { getPurchaseLog } from '../../apis/custodianApis';\n\nfunction Report() {\n  const [dateFilter, setDateFilter] = useState(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [type, setType] = useState(\"\")\n  const [res, setRes] = useState({})\n  const [tradeValueData, setTradeValueData] = useState({})\n\n  // const data = useMemo(() => {\n  //   let cloned = [...live]\n\n  //   if (dateFilter) {\n  //     let start = new Date(dateFilter.start).getTime()\n  //     let end = new Date(dateFilter.end).getTime()\n  //     cloned = cloned.filter(l => {\n  //       let currDate = new Date(l.maturityDate).getTime()\n  //       return currDate >= start && currDate <= end\n  //     })\n  //   }\n\n  //   if (type) {\n  //     cloned = cloned.filter(l => l.transactionType.match(type))\n  //   }\n\n  //   return cloned\n  // }, [type, dateFilter])\n\n  useEffect(() => {\n    const onSuccess = (payload) => {\n      setRes(payload)\n      for (let i = 0; i < res.length; i++) {\n        const entry = res[i]\n        // for (const [key, value] of Object.entries(res[i])) {\n          \n        // }\n        setTradeValueData(p => ({\n          ...p,\n          [entry.Isin]: entry.TradeValue + tradeValueData[entry.Isin]\n        }))\n      }\n      setIsLoading(false)\n    }\n\n    getPurchaseLog(onSuccess)\n  }, [])\n\n  const updateType = val => setType(p => p === val ? \"\" : val)\n\n  if (isLoading) return <Loader wrapperCls='h-[calc(100vh-64px)]' />\n\n  return (\n    <section className=\"dfc h-[calc(100vh-64px)] border-r border-[rgba(255,255,255,.3)] overflow-y-hidden\">\n      <div className='df gap-4 p-4 border-b border-[rgba(255,255,255,.3)] relative'>\n        <DropDownWrapper\n          list={[\"List of Tokenized Bonds\", \"List of Detokenized Bonds\", \"Trade Report\"]}\n          onClk={updateType}\n          active={type}\n          activeCls=\"bg-slate-600 text-white\"\n          rootCls=\"p-0\"\n          needArrow\n        >\n          <Filter className={`fill-white ${type ? \"opacity-100\" : \"opacity-70\"}`} />\n        </DropDownWrapper>\n\n        {/* <FilterByDate\n          setDateFilter={setDateFilter}\n        /> */}\n\n        <h1 className='absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-lg font-medium text-center'>\n          Report\n        </h1>\n      </div>\n\n      <div className=\"scroll-y overflow-x-auto\">\n        <table className=\"w-full table-fixed\">\n          <thead>\n            <tr className=\"sticky top-0 text-sm bg-slate-900 shadow-[0_1px_3px_0_rgba(255,255,255,.1)] z-1\">\n              {/* <td className=\"w-32 px-4 py-2\">Trade Date</td> */}\n              <td className=\"w-36 px-4 py-2\">ISIN</td>\n              <td className=\"w-52 px-4 py-2\">Issuer Name</td>\n              <td className=\"w-32 px-4 py-2\">Coupon Rate</td>\n              <td className=\"w-32 px-4 py-2\">Maturity Date</td>\n              <td className=\"w-28 px-4 py-2\">No. of Tokens</td>\n              <td className=\"w-28 px-4 py-2\">Trade Value</td>\n            </tr>\n          </thead>\n\n          <tbody>\n            {\n              res.map(li => (\n                <tr\n                  key={li.id}\n                  className=\"hover:bg-[rgba(255,255,255,.1)] cursor-pointer group\"\n                >\n                  {/* <td className=\"px-4 py-2 text-sm opacity-80 border-b border-[rgba(255,255,255,.3)] group-hover:opacity-100\"> {li.maturitydate} </td> */}\n                  <td className=\"px-4 py-2 text-sm opacity-80 border-b border-[rgba(255,255,255,.3)] group-hover:opacity-100\"> {li.Isin} </td>\n                  <td className=\"px-4 py-2 text-sm font-medium opacity-80 border-b border-[rgba(255,255,255,.3)] group-hover:opacity-100\"> {li.issuerName} </td>\n                  <td className=\"px-4 py-2 text-sm opacity-80 border-b border-[rgba(255,255,255,.3)] group-hover:opacity-100\"> {li.couponrate} </td>\n                  <td className=\"px-4 py-2 text-sm opacity-80 border-b border-[rgba(255,255,255,.3)] group-hover:opacity-100\"> {li.maturitydate} </td>\n                  <td className=\"px-4 py-2 text-sm opacity-80 border-b border-[rgba(255,255,255,.3)] group-hover:opacity-100\"> {li.volumn / 1000} </td>\n                  <td className=\"px-4 py-2 text-sm opacity-80 border-b border-[rgba(255,255,255,.3)] group-hover:opacity-100\"> {li.volumn} </td>\n                </tr>\n              ))\n            }\n          </tbody>\n        </table>\n      </div>\n    </section>\n  )\n}\n\nexport default Report"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}